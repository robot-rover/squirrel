---
source: squirrel_lang/src/parser/mod.rs
expression: actual_ast
---
keyword_span:
  start: Start
  end: End
arg_span:
  start: Start
  end: End
num_args: 0
default_expr: []
local_names:
  - - vargv
    - 0
  - - coro
    - 1
  - - susparam
    - 2
  - - i
    - 3
num_locals: 4
upvalues: []
is_varargs: true
body:
  data:
    Block:
      - data:
          Expr:
            data:
              Assign:
                target:
                  Ident:
                    - coroutine_test
                    - start: Start
                      end: End
                value:
                  data:
                    FunctionDef:
                      keyword_span:
                        start: Start
                        end: End
                      arg_span:
                        start: Start
                        end: End
                      num_args: 2
                      default_expr: []
                      local_names:
                        - - a
                          - 0
                        - - b
                          - 1
                        - - ret
                          - 2
                      num_locals: 3
                      upvalues: []
                      is_varargs: false
                      body:
                        data:
                          Block:
                            - data:
                                Expr:
                                  data:
                                    FunctionCall:
                                      func:
                                        FieldAccess:
                                          - data: Globals
                                            span:
                                              start: Start
                                              end: End
                                          - - print
                                            - start: Start
                                              end: End
                                      args:
                                        - data:
                                            BinaryOp:
                                              op: Add
                                              op_span:
                                                start: Start
                                                end: End
                                              lhs:
                                                data:
                                                  BinaryOp:
                                                    op: Add
                                                    op_span:
                                                      start: Start
                                                      end: End
                                                    lhs:
                                                      data:
                                                        BinaryOp:
                                                          op: Add
                                                          op_span:
                                                            start: Start
                                                            end: End
                                                          lhs:
                                                            data:
                                                              Local:
                                                                - 0
                                                                - start: Start
                                                                  end: End
                                                            span:
                                                              start: Start
                                                              end: End
                                                          rhs:
                                                            data:
                                                              Literal:
                                                                String: " "
                                                            span:
                                                              start: Start
                                                              end: End
                                                      span:
                                                        start: Start
                                                        end: End
                                                    rhs:
                                                      data:
                                                        Local:
                                                          - 1
                                                          - start: Start
                                                            end: End
                                                      span:
                                                        start: Start
                                                        end: End
                                                span:
                                                  start: Start
                                                  end: End
                                              rhs:
                                                data:
                                                  Literal:
                                                    String: "\n"
                                                span:
                                                  start: Start
                                                  end: End
                                          span:
                                            start: Start
                                            end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    Assign:
                                      target:
                                        Local:
                                          - 2
                                          - start: Start
                                            end: End
                                      value:
                                        data:
                                          FunctionCall:
                                            func:
                                              FieldAccess:
                                                - data: Globals
                                                  span:
                                                    start: Start
                                                    end: End
                                                - - suspend
                                                  - start: Start
                                                    end: End
                                            args:
                                              - data:
                                                  Literal:
                                                    String: suspend 1
                                                span:
                                                  start: Start
                                                  end: End
                                        span:
                                          start: Start
                                          end: End
                                      kind: Normal
                                      op_span:
                                        start: Start
                                        end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    FunctionCall:
                                      func:
                                        FieldAccess:
                                          - data: Globals
                                            span:
                                              start: Start
                                              end: End
                                          - - print
                                            - start: Start
                                              end: End
                                      args:
                                        - data:
                                            BinaryOp:
                                              op: Add
                                              op_span:
                                                start: Start
                                                end: End
                                              lhs:
                                                data:
                                                  BinaryOp:
                                                    op: Add
                                                    op_span:
                                                      start: Start
                                                      end: End
                                                    lhs:
                                                      data:
                                                        Literal:
                                                          String: "the coroutine says "
                                                      span:
                                                        start: Start
                                                        end: End
                                                    rhs:
                                                      data:
                                                        Local:
                                                          - 2
                                                          - start: Start
                                                            end: End
                                                      span:
                                                        start: Start
                                                        end: End
                                                span:
                                                  start: Start
                                                  end: End
                                              rhs:
                                                data:
                                                  Literal:
                                                    String: "\n"
                                                span:
                                                  start: Start
                                                  end: End
                                          span:
                                            start: Start
                                            end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    Assign:
                                      target:
                                        Local:
                                          - 2
                                          - start: Start
                                            end: End
                                      value:
                                        data:
                                          FunctionCall:
                                            func:
                                              FieldAccess:
                                                - data: Globals
                                                  span:
                                                    start: Start
                                                    end: End
                                                - - suspend
                                                  - start: Start
                                                    end: End
                                            args:
                                              - data:
                                                  Literal:
                                                    String: suspend 2
                                                span:
                                                  start: Start
                                                  end: End
                                        span:
                                          start: Start
                                          end: End
                                      kind: Normal
                                      op_span:
                                        start: Start
                                        end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    FunctionCall:
                                      func:
                                        FieldAccess:
                                          - data: Globals
                                            span:
                                              start: Start
                                              end: End
                                          - - print
                                            - start: Start
                                              end: End
                                      args:
                                        - data:
                                            BinaryOp:
                                              op: Add
                                              op_span:
                                                start: Start
                                                end: End
                                              lhs:
                                                data:
                                                  BinaryOp:
                                                    op: Add
                                                    op_span:
                                                      start: Start
                                                      end: End
                                                    lhs:
                                                      data:
                                                        Literal:
                                                          String: "the coroutine says "
                                                      span:
                                                        start: Start
                                                        end: End
                                                    rhs:
                                                      data:
                                                        Local:
                                                          - 2
                                                          - start: Start
                                                            end: End
                                                      span:
                                                        start: Start
                                                        end: End
                                                span:
                                                  start: Start
                                                  end: End
                                              rhs:
                                                data:
                                                  Literal:
                                                    String: "\n"
                                                span:
                                                  start: Start
                                                  end: End
                                          span:
                                            start: Start
                                            end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    Assign:
                                      target:
                                        Local:
                                          - 2
                                          - start: Start
                                            end: End
                                      value:
                                        data:
                                          FunctionCall:
                                            func:
                                              FieldAccess:
                                                - data: Globals
                                                  span:
                                                    start: Start
                                                    end: End
                                                - - suspend
                                                  - start: Start
                                                    end: End
                                            args:
                                              - data:
                                                  Literal:
                                                    String: suspend 3
                                                span:
                                                  start: Start
                                                  end: End
                                        span:
                                          start: Start
                                          end: End
                                      kind: Normal
                                      op_span:
                                        start: Start
                                        end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Expr:
                                  data:
                                    FunctionCall:
                                      func:
                                        FieldAccess:
                                          - data: Globals
                                            span:
                                              start: Start
                                              end: End
                                          - - print
                                            - start: Start
                                              end: End
                                      args:
                                        - data:
                                            BinaryOp:
                                              op: Add
                                              op_span:
                                                start: Start
                                                end: End
                                              lhs:
                                                data:
                                                  BinaryOp:
                                                    op: Add
                                                    op_span:
                                                      start: Start
                                                      end: End
                                                    lhs:
                                                      data:
                                                        Literal:
                                                          String: "the coroutine says "
                                                      span:
                                                        start: Start
                                                        end: End
                                                    rhs:
                                                      data:
                                                        Local:
                                                          - 2
                                                          - start: Start
                                                            end: End
                                                      span:
                                                        start: Start
                                                        end: End
                                                span:
                                                  start: Start
                                                  end: End
                                              rhs:
                                                data:
                                                  Literal:
                                                    String: "\n"
                                                span:
                                                  start: Start
                                                  end: End
                                          span:
                                            start: Start
                                            end: End
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - data:
                                Return:
                                  data:
                                    Literal:
                                      String: "I'm done"
                                  span:
                                    start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                        span:
                          start: Start
                          end: End
                  span:
                    start: Start
                    end: End
                kind: NewSlot
                op_span:
                  start: Start
                  end: End
            span:
              start: Start
              end: End
        span:
          start: Start
          end: End
      - data:
          Expr:
            data:
              Assign:
                target:
                  Local:
                    - 1
                    - start: Start
                      end: End
                value:
                  data:
                    FunctionCall:
                      func:
                        FieldAccess:
                          - data: Globals
                            span:
                              start: Start
                              end: End
                          - - newthread
                            - start: Start
                              end: End
                      args:
                        - data:
                            Ident: coroutine_test
                          span:
                            start: Start
                            end: End
                  span:
                    start: Start
                    end: End
                kind: Normal
                op_span:
                  start: Start
                  end: End
            span:
              start: Start
              end: End
        span:
          start: Start
          end: End
      - data:
          Expr:
            data:
              Assign:
                target:
                  Local:
                    - 2
                    - start: Start
                      end: End
                value:
                  data:
                    FunctionCall:
                      func:
                        FieldAccess:
                          - data:
                              Local:
                                - 1
                                - start: Start
                                  end: End
                            span:
                              start: Start
                              end: End
                          - - call
                            - start: Start
                              end: End
                      args:
                        - data:
                            Literal:
                              String: test
                          span:
                            start: Start
                            end: End
                        - data:
                            Literal:
                              String: coroutine
                          span:
                            start: Start
                            end: End
                  span:
                    start: Start
                    end: End
                kind: Normal
                op_span:
                  start: Start
                  end: End
            span:
              start: Start
              end: End
        span:
          start: Start
          end: End
      - data:
          Expr:
            data:
              Assign:
                target:
                  Local:
                    - 3
                    - start: Start
                      end: End
                value:
                  data:
                    Literal:
                      Integer: 1
                  span:
                    start: Start
                    end: End
                kind: Normal
                op_span:
                  start: Start
                  end: End
            span:
              start: Start
              end: End
        span:
          start: Start
          end: End
      - data:
          While:
            - data:
                BinaryOp:
                  op: Eq
                  op_span:
                    start: Start
                    end: End
                  lhs:
                    data:
                      FunctionCall:
                        func:
                          FieldAccess:
                            - data:
                                Local:
                                  - 1
                                  - start: Start
                                    end: End
                              span:
                                start: Start
                                end: End
                            - - getstatus
                              - start: Start
                                end: End
                        args: []
                    span:
                      start: Start
                      end: End
                  rhs:
                    data:
                      Literal:
                        String: suspended
                    span:
                      start: Start
                      end: End
              span:
                start: Start
                end: End
            - data:
                Block:
                  - data:
                      Expr:
                        data:
                          FunctionCall:
                            func:
                              FieldAccess:
                                - data: Globals
                                  span:
                                    start: Start
                                    end: End
                                - - print
                                  - start: Start
                                    end: End
                            args:
                              - data:
                                  BinaryOp:
                                    op: Add
                                    op_span:
                                      start: Start
                                      end: End
                                    lhs:
                                      data:
                                        BinaryOp:
                                          op: Add
                                          op_span:
                                            start: Start
                                            end: End
                                          lhs:
                                            data:
                                              Literal:
                                                String: "suspend passed ["
                                            span:
                                              start: Start
                                              end: End
                                          rhs:
                                            data:
                                              Local:
                                                - 2
                                                - start: Start
                                                  end: End
                                            span:
                                              start: Start
                                              end: End
                                      span:
                                        start: Start
                                        end: End
                                    rhs:
                                      data:
                                        Literal:
                                          String: "]\n"
                                      span:
                                        start: Start
                                        end: End
                                span:
                                  start: Start
                                  end: End
                        span:
                          start: Start
                          end: End
                    span:
                      start: Start
                      end: End
                  - data:
                      Expr:
                        data:
                          Assign:
                            target:
                              Local:
                                - 2
                                - start: Start
                                  end: End
                            value:
                              data:
                                FunctionCall:
                                  func:
                                    FieldAccess:
                                      - data:
                                          Local:
                                            - 1
                                            - start: Start
                                              end: End
                                        span:
                                          start: Start
                                          end: End
                                      - - wakeup
                                        - start: Start
                                          end: End
                                  args:
                                    - data:
                                        BinaryOp:
                                          op: Add
                                          op_span:
                                            start: Start
                                            end: End
                                          lhs:
                                            data:
                                              Literal:
                                                String: "ciao "
                                            span:
                                              start: Start
                                              end: End
                                          rhs:
                                            data:
                                              Local:
                                                - 3
                                                - start: Start
                                                  end: End
                                            span:
                                              start: Start
                                              end: End
                                      span:
                                        start: Start
                                        end: End
                              span:
                                start: Start
                                end: End
                            kind: Normal
                            op_span:
                              start: Start
                              end: End
                        span:
                          start: Start
                          end: End
                    span:
                      start: Start
                      end: End
                  - data:
                      Expr:
                        data:
                          UnaryRefOp:
                            - PreIncr
                            - start: Start
                              end: End
                            - Local:
                                - 3
                                - start: Start
                                  end: End
                        span:
                          start: Start
                          end: End
                    span:
                      start: Start
                      end: End
              span:
                start: Start
                end: End
        span:
          start: Start
          end: End
      - data:
          Expr:
            data:
              FunctionCall:
                func:
                  FieldAccess:
                    - data: Globals
                      span:
                        start: Start
                        end: End
                    - - print
                      - start: Start
                        end: End
                args:
                  - data:
                      BinaryOp:
                        op: Add
                        op_span:
                          start: Start
                          end: End
                        lhs:
                          data:
                            BinaryOp:
                              op: Add
                              op_span:
                                start: Start
                                end: End
                              lhs:
                                data:
                                  Literal:
                                    String: "return passed ["
                                span:
                                  start: Start
                                  end: End
                              rhs:
                                data:
                                  Local:
                                    - 2
                                    - start: Start
                                      end: End
                                span:
                                  start: Start
                                  end: End
                          span:
                            start: Start
                            end: End
                        rhs:
                          data:
                            Literal:
                              String: "]\n"
                          span:
                            start: Start
                            end: End
                    span:
                      start: Start
                      end: End
            span:
              start: Start
              end: End
        span:
          start: Start
          end: End
  span:
    start: Start
    end: End
